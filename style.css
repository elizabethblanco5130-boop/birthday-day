/* ========== RESET ========== */
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; }
body{ background:#000; color:#fff; font-family: system-ui, -apple-system, Arial, sans-serif; }

/* ========== HUB base ========== */
body.page-hub{ overflow:hidden; }

/* Video fondo */
#bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-5;
}

/* Overlay (cambia con world) */
.hub-overlay{
  position:fixed;
  inset:0;
  z-index:-4;
  pointer-events:none;
  opacity:.0;
  transition: opacity .9s ease;
}

/* Normal */
body.normal .hub-overlay{
  opacity:.12;
  background: radial-gradient(circle at 30% 20%, rgba(255,0,0,.22), rgba(0,0,0,.65));
}

/* Upside Down */
body.upside .hub-overlay{
  opacity:.22;
  background: radial-gradient(circle at 70% 20%, rgba(0,255,255,.18), rgba(0,0,0,.82));
}

.hub-overlay.pulse{
  animation: pulse 420ms ease;
}
@keyframes pulse{
  0%{ opacity:0; }
  100%{ opacity:1; }
}

/* Vignette */
.hub-vignette{
  position:fixed;
  inset:0;
  z-index:-3;
  pointer-events:none;
  background: radial-gradient(ellipse at center, rgba(0,0,0,.10), rgba(0,0,0,.85));
}

/* Top bar */
.hub-top{
  position:fixed;
  top:14px; left:14px; right:14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  z-index:10;
}

.hub-back{
  width:44px; height:44px;
  display:grid; place-items:center;
  text-decoration:none;
  color:#fff;
  border:1px solid rgba(255,255,255,.25);
  border-radius:14px;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(8px);
}

.hub-title{
  flex:1;
  text-align:center;
  font-weight:900;
  letter-spacing:.18em;
  color:#ff3b3b;
  text-shadow:0 0 18px rgba(255,0,0,.22);
  user-select:none;
}

.hub-worldbtn{
  height:44px;
  padding:0 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.25);
  background: rgba(0,0,0,.35);
  color:#fff;
  backdrop-filter: blur(8px);
}

/* Stage */
.hub-stage{
  position:fixed;
  inset:0;
  padding: 82px 14px 86px;
  z-index:5;
}

/* Iconos flotantes */
.hub-icon{
  position:absolute;
  width: 150px;
  min-height: 120px;

  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;

  gap:10px;
  text-decoration:none;

  border-radius:22px;
  border:1px solid rgba(255,255,255,.20);
  background: rgba(0,0,0,.26);
  backdrop-filter: blur(10px);
  box-shadow: 0 0 22px rgba(255,0,0,.10);
  padding:14px;
}

.hub-icon img{
  width:52px; height:52px;
  object-fit:contain;
  display:block;
  filter: drop-shadow(0 0 12px rgba(255,0,0,.16));
}

.hub-icon span{
  font-size:13px;
  letter-spacing:.10em;
  text-transform:uppercase;
  opacity:.95;
}

/* posiciones “desordenado cool” */
.hub-icon.f1{ left:10%; top:20%; }
.hub-icon.f2{ right:10%; top:18%; }
.hub-icon.f3{ left:18%; top:48%; }
.hub-icon.f4{ right:16%; top:50%; }
.hub-icon.f5{ left:40%; top:34%; }
.hub-icon.f6{ right:38%; top:72%; width:160px; }

/* flotación */
.float{ animation: floaty 6.5s ease-in-out infinite; }
.f2{ animation-duration: 7.8s; }
.f3{ animation-duration: 6.9s; }
.f4{ animation-duration: 8.5s; }
.f5{ animation-duration: 7.2s; }
.f6{ animation-duration: 9.2s; }

@keyframes floaty{
  0%,100%{ transform: translate(0,0) rotate(0deg); }
  50%{ transform: translate(10px,-14px) rotate(2deg); }
}

/* Hint abajo */
.hub-hint{
  position:fixed;
  left:14px; right:14px; bottom:14px;
  z-index:10;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.30);
  backdrop-filter: blur(10px);
  color:#fff;
  padding:12px 14px;
  font-size:13px;
  line-height:1.25;
}

/* Linterna */
.flashlight{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9;
  background: radial-gradient(
    circle 140px at var(--mx, 50vw) var(--my, 35vh),
    rgba(255,255,255,.09),
    rgba(0,0,0,.82) 60%,
    rgba(0,0,0,.92) 100%
  );
  mix-blend-mode: screen;
  opacity:.85;
}

body.upside .flashlight{
  background: radial-gradient(
    circle 160px at var(--mx, 50vw) var(--my, 35vh),
    rgba(0,255,255,.10),
    rgba(0,0,0,.86) 62%,
    rgba(0,0,0,.96) 100%
  );
  mix-blend-mode: normal;
  opacity:.92;
}

/* polvo */
#dust{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:8;
  opacity:.85;
}

/* Easter: más intenso */
body.easter #dust{ opacity:1; }
body.easter .flashlight{ opacity:1; }

/* click fx */
.fx{
  position:fixed;
  width:10px; height:10px;
  border-radius:50%;
  pointer-events:none;
  z-index:99999;
  transform: translate(-50%,-50%);
  animation: fxpop 650ms ease-out forwards;
}
@keyframes fxpop{
  0%{ opacity:1; transform: translate(-50%,-50%) scale(.7); }
  70%{ opacity:.9; transform: translate(-50%,-50%) scale(3.4); }
  100%{ opacity:0; transform: translate(-50%,-50%) scale(5.2); }
}
.fx.ink{ background: rgba(255,0,0,.95); box-shadow: 0 0 16px rgba(255,0,0,.75), 0 0 26px rgba(0,255,255,.18); }
.fx.light{ background: rgba(0,255,255,.9); box-shadow: 0 0 18px rgba(0,255,255,.7), 0 0 28px rgba(255,0,0,.10); }
.fx.ash{ background: rgba(220,220,220,.95); box-shadow: 0 0 18px rgba(220,220,220,.55), 0 0 28px rgba(255,0,0,.10); }
.fx.spark{ background: rgba(255,170,0,.95); box-shadow: 0 0 18px rgba(255,170,0,.75), 0 0 28px rgba(255,0,0,.12); }

/* Responsive */
@media (max-width:420px){
  .hub-icon{ width:140px; }
  .hub-icon.f5{ left:34%; top:36%; }
  .hub-icon.f6{ right:28%; top:74%; }
}
